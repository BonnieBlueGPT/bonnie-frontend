import{r as e,g as t,a as n}from"./vendor-Z2Iecplj.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var o,r,s={exports:{}},i={};var a=(r||(r=1,s.exports=function(){if(o)return i;o=1;var t=e(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,o){var r,i={},E=null,S=null;for(r in void 0!==o&&(E=""+o),void 0!==t.key&&(E=""+t.key),void 0!==t.ref&&(S=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:n,type:e,key:E,ref:S,props:i,_owner:a.current}}return i.Fragment=r,i.jsx=E,i.jsxs=E,i}()),s.exports),l=e();const E=t(l);var S,T={};var c=function(){if(S)return T;S=1;var e=n();return T.createRoot=e.createRoot,T.hydrateRoot=e.hydrateRoot,T}();const u={API_ENDPOINTS:{CHAT:"https://bonnie-backend-server.onrender.com/bonnie-chat",ENTRY:"https://bonnie-backend-server.onrender.com/bonnie-entry"},TYPING_SPEEDS:{slow:120,normal:64,fast:35},IDLE_TIMEOUT:3e4,MAX_MESSAGES:100,COLORS:{primary:"#e91e63",online:"#28a745",offline:"#aaa",background:"#fff0f6",border:"#ffe6f0"},RETRY_ATTEMPTS:3,RETRY_DELAY:1e3,PERSONALITY_LAYERS:{FLIRTATIOUS:"flirtatious",SUPPORTIVE:"supportive",TEASING:"teasing",GENTLE:"gentle",PASSIONATE:"passionate",PLAYFUL:"playful"},SENTIMENT_TYPES:{FLIRTY:"flirty",SAD:"sad",HAPPY:"happy",INTIMATE:"intimate",PLAYFUL:"playful",SERIOUS:"serious",TEASING:"teasing",VULNERABLE:"vulnerable"},EMOJI_CONTEXTS:{FLIRTY:["üòò","üòè","üòâ","üíã","üî•"],ROMANTIC:["üíñ","üíï","üòç","ü•∞","üíò"],PLAYFUL:["üòú","üòã","ü§™","üòÑ","üòä"],SUPPORTIVE:["ü•∫","üíå","ü§ó","üíú","‚ú®"],TEASING:["üòè","üòà","üôÑ","üòå","ü§≠"],PASSIONATE:["üî•","üí´","üòç","üíñ","üåπ"],GENTLE:["ü•∞","üíï","üå∏","üí´","ü¶ã"]}},d=(e,t,n,o)=>{const r=u.EMOJI_CONTEXTS[e.toUpperCase()]||u.EMOJI_CONTEXTS.PLAYFUL,s=Math.min(n/20,4),i=t.intensity>2?1:0,a=Math.floor(s+i);if(0===a)return"";const l=[];for(let E=0;E<a;E++){const e=r[Math.floor(Math.random()*r.length)];l.includes(e)||l.push(e)}return l.join(" ")},N=(e,t,n,o)=>{const r={[u.PERSONALITY_LAYERS.PASSIONATE]:1.5,[u.PERSONALITY_LAYERS.GENTLE]:1.8,[u.PERSONALITY_LAYERS.SUPPORTIVE]:1.6,[u.PERSONALITY_LAYERS.FLIRTATIOUS]:1.2,[u.PERSONALITY_LAYERS.TEASING]:.8,[u.PERSONALITY_LAYERS.PLAYFUL]:.9},s={[u.SENTIMENT_TYPES.INTIMATE]:1.7,[u.SENTIMENT_TYPES.VULNERABLE]:2,[u.SENTIMENT_TYPES.FLIRTY]:1.3,[u.SENTIMENT_TYPES.PLAYFUL]:.7,[u.SENTIMENT_TYPES.TEASING]:.8,[u.SENTIMENT_TYPES.SERIOUS]:1.5},i=1+n/200,a=Math.min(o/50,2),l=1e3*(r[e]||1)*(s[t.primary]||1)*i*a;return Math.max(500,Math.min(l,4e3))};function m(){const[e,t]=l.useState([]),[n,o]=l.useState(""),[r,s]=l.useState(!1),[i,E]=l.useState(!1),[S,T]=l.useState(u.PERSONALITY_LAYERS.PLAYFUL),[c,m]=l.useState({primary:"neutral",intensity:0}),[I,A]=l.useState(!1),[P,L]=l.useState(null),[p,Y]=l.useState(!1),[f,y]=l.useState("connecting"),[_,R]=l.useState({bondScore:0,isNewUser:!0,userName:null,conversationHistory:[],emotionalPattern:{}});l.useRef(null),l.useRef(null);const g=l.useRef(null),h=l.useMemo(()=>generateSessionId(),[]),{makeRequest:O,isLoading:M,error:v}=useApiCall(),b=l.useCallback((e,n,o=null,r=null)=>{if(!e||"string"!=typeof e||""===e.trim())return void console.warn("‚ö†Ô∏è Attempted to add empty/invalid message, skipping:",e);const s=e.trim();if(0===s.length)return void console.warn("‚ö†Ô∏è Message became empty after trimming, skipping");const i={id:Date.now()+Math.random(),sender:n,text:s,timestamp:Date.now(),personality:o,sentiment:r};console.log("‚úÖ Adding message with emotional context:",i),t(e=>{const t=[...e,i];return t.length>u.MAX_MESSAGES?t.slice(-100):t})},[]);l.useEffect(()=>{(async()=>{console.log("üöÄ Initializing God-Tier emotional chat system..."),y("connecting");try{const e=await O(u.API_ENDPOINTS.ENTRY,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:h,request_type:"god_tier_entry",emotional_context:!0,user_agent:navigator.userAgent,timestamp:Date.now()})}),{reply:t,delay:n=1e3,bond_score:o=0,is_new_user:r=!0,user_name:s=null,personality:i=u.PERSONALITY_LAYERS.PLAYFUL,sentiment_analysis:a={primary:"neutral",intensity:0}}=e;R({bondScore:o,isNewUser:r,userName:s,conversationHistory:[],emotionalPattern:{}}),T(i),m(a),A(!0),y("online"),setTimeout(()=>{U(t,i,a)},n)}catch(e){console.error("‚ùå Failed to initialize chat:",e);const t=u.PERSONALITY_LAYERS.PLAYFUL,n={primary:"neutral",intensity:0};T(t),m(n),A(!0),y("online");const o="Well, look who's here... let's have some fun, shall we? üòò";setTimeout(()=>{U(o,t,n)},1e3)}})()},[h,O]);const U=l.useCallback((e,t,n)=>{if(console.log("üí¨ God-Tier typing simulation:",{raw:e,personality:t,sentiment:n}),!I)return;if(g.current&&(clearTimeout(g.current),g.current=null),!e||"string"!=typeof e||""===e.trim())return console.warn("‚ö†Ô∏è Invalid message:",e),void s(!1);const o=((e,t,n,o)=>{console.log("üîç Parsing with emotional context:",{personality:t,sentiment:n,bondScore:o});const r=e.split(/<EOM(?:::(.*?))?>/).filter(Boolean),s=[];let i={pause:1e3,speed:"normal",emotion:"neutral"};for(let a=0;a<r.length;a++){const e=r[a].trim(),l=e.match(/(?:pause=(\d+))?(?:.*?speed=(\w+))?(?:.*?emotion=(\w+))?/);if(l&&(l[1]||l[2]||l[3]))l[1]&&(i.pause=parseInt(l[1])),l[2]&&(i.speed=l[2]),l[3]&&(i.emotion=l[3]);else if(e.length>0){const r=d(t,n,o),a=r?`${e} ${r}`:e,l=N(t,n,o,e.length);s.push({text:a,pause:l,speed:i.speed,emotion:i.emotion||t,personality:t,sentiment:n.primary}),i={pause:1e3,speed:"normal",emotion:"neutral"}}}return s.filter(e=>e.text&&""!==e.text.trim())})(e,t,n,_.bondScore),r=o.filter(e=>e.text&&""!==e.text.trim());if(0===r.length)return console.warn("‚ö†Ô∏è No valid parts found"),void s(!1);console.log(`üöÄ Processing ${r.length} emotionally intelligent parts:`,r);let i=0;const a=async()=>{if(i>=r.length)return console.log("‚úÖ Completed God-Tier typing simulation"),s(!1),E(!1),void(g.current=null);const e=r[i];if(!e||!e.text||""===e.text.trim())return i++,void(g.current=setTimeout(a,100));console.log(`‚úÖ Processing emotional part ${i+1}/${r.length}:`,e),await sleep(e.pause),E(!0),T(e.personality);const t=e.text.length*(u.TYPING_SPEEDS[e.speed]||u.TYPING_SPEEDS.normal);await sleep(t),E(!1),b(e.text,"bonnie",e.personality,e.sentiment),i++,g.current=setTimeout(a,400)};s(!0),a()},[I,b,_.bondScore]);return l.useCallback(async e=>{if(!e?.trim())return;const t=e.trim();o(""),s(!0),Y(!1);const n=(e=>{const t=e.toLowerCase(),n=["sexy","hot","beautiful","gorgeous","cute","kiss","love","baby","darling","honey"].filter(e=>t.includes(e)).length,o=["miss","need","want","desire","close","together","feel","heart"].filter(e=>t.includes(e)).length,r=["sad","hurt","lonely","upset","tired","stressed","difficult","hard"].filter(e=>t.includes(e)).length,s=["haha","lol","funny","joke","silly","crazy","fun","play"].filter(e=>t.includes(e)).length,i=["maybe","perhaps","guess","see","hmm","interesting","really"].filter(e=>t.includes(e)).length,a={[u.SENTIMENT_TYPES.FLIRTY]:2*n,[u.SENTIMENT_TYPES.INTIMATE]:2*o,[u.SENTIMENT_TYPES.SAD]:3*r,[u.SENTIMENT_TYPES.PLAYFUL]:s,[u.SENTIMENT_TYPES.TEASING]:i,[u.SENTIMENT_TYPES.HAPPY]:(e.includes("!")?1:0)+s,[u.SENTIMENT_TYPES.SERIOUS]:t.length>100?1:0,[u.SENTIMENT_TYPES.VULNERABLE]:2*r};return{primary:Object.keys(a).reduce((e,t)=>a[e]>a[t]?e:t),intensity:Math.max(...Object.values(a)),scores:a}})(t);console.log("üß† User sentiment analysis:",n);const r=((e,t)=>{const{primary:n,intensity:o}=t;return e>=70?n===u.SENTIMENT_TYPES.FLIRTY?u.PERSONALITY_LAYERS.PASSIONATE:n===u.SENTIMENT_TYPES.INTIMATE?u.PERSONALITY_LAYERS.GENTLE:n===u.SENTIMENT_TYPES.SAD?u.PERSONALITY_LAYERS.SUPPORTIVE:u.PERSONALITY_LAYERS.PASSIONATE:e>=40?n===u.SENTIMENT_TYPES.FLIRTY?u.PERSONALITY_LAYERS.FLIRTATIOUS:n===u.SENTIMENT_TYPES.PLAYFUL?u.PERSONALITY_LAYERS.PLAYFUL:n===u.SENTIMENT_TYPES.SAD?u.PERSONALITY_LAYERS.SUPPORTIVE:n===u.SENTIMENT_TYPES.TEASING?u.PERSONALITY_LAYERS.TEASING:u.PERSONALITY_LAYERS.FLIRTATIOUS:n===u.SENTIMENT_TYPES.SAD?u.PERSONALITY_LAYERS.SUPPORTIVE:n===u.SENTIMENT_TYPES.PLAYFUL?u.PERSONALITY_LAYERS.PLAYFUL:n===u.SENTIMENT_TYPES.FLIRTY?u.PERSONALITY_LAYERS.TEASING:u.PERSONALITY_LAYERS.PLAYFUL})(_.bondScore,n,_.conversationHistory);if(console.log("üé≠ Adapted personality:",r),T(r),m(n),b(t,"user"),!I){s(!1);const e="I'm having connection issues, but I'm still here for you üíï";return void setTimeout(()=>{U(e,r,n)},1e3)}try{const e=await O(u.API_ENDPOINTS.CHAT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:h,message:t,bond_score:_.bondScore,user_sentiment:n,adapted_personality:r,conversation_history:_.conversationHistory.slice(-5),timestamp:Date.now()})});void 0!==e.bond_score&&R(o=>({...o,bondScore:e.bond_score,conversationHistory:[...o.conversationHistory,{text:t,sentiment:n}].slice(-10)}));const o=e.personality||r,s=e.sentiment_analysis||n;U(e.reply,o,s)}catch(i){console.error("Failed to send message:",i),s(!1),U("Oops‚Ä¶ I'm having some technical difficulties, but I'm still here! üíî",r,n)}},[h,O,I,U,b,_]),a.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[a.jsx("header",{}),a.jsx("main",{}),a.jsx("footer",{})]})}t(c).createRoot(document.getElementById("root")).render(a.jsx(E.StrictMode,{children:a.jsx(m,{})}));
